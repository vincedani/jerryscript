# ES6 module support for JerryScript

The module system allows users to write import and export statements in scripts. Therefore the logic of the application could be separated in custom modules.
The standard's relevant part can be found [here]( https://www.ecma-international.org/ecma-262/6.0/#sec-modules).

## General

If the main script contains import statements, then Jerry opens and runs the appropriate scripts before the main script (as the standard says). The script's and the module's extension is `.js`, custom extensions are unnecessary.

main.js

```js
import { secret_number } from "./module.js"

print (secret_number);
```

module.js

```js
var secret_number = 42;

export secret_number;
```

## Supported features

* import variable or function
  * add alias name to the imported variable (function, class)
* export variable or function
  * add alias name to the exported variable (function, class)
* whole module import statements
  * `import * from 'module.js`
  * `import { * as module } from 'module.js`
* redirection ( `export { a, b } from 'module.js'` )
* import module for it's side effect only (`import 'module.js'`)
* default import and export
  * `import c from 'module.js'`
  * `export default b`

### Example

```js
import {
  engine,
  version as v
} from "./module.js"

import { getFeatureDetails } from "./module_2.js"

var version = "v3.1415";

print("> main.js");

print(">> Engine: " + engine);
print(">> Version: " + v);

print (">> " + getFeatureDetails());
print (">> Script version: " + version);
```

```js
// module.js
var _engine = "JerryScript";
export _engine as engine;

export var version = "1.0 (e92ae0fb)";
```

```js
// module_2.js
var featureName = "EcmaScript 2015 modules";
var year = 2018;

export function getFeatureDetails() {
  return "Feature name: " + featureName + " | developed in " + year;
}
```

### Whole module import statements

The whole module can be imported. In this case the `alias` object would contain the exported parts of the module. If the import is not aliased, the `global object` would contain the exports.

```js
import * from './module.js';

print(">> Engine: " + engine);
print(">> Version: " + version);
```

```js
import from './module.js';

print(">> Engine: " + engine);
print(">> Version: " + version);
```

```js
import { * as alias } from './module.js';

print(">> Engine: " + alias.engine);
print(">> Version: " + alias.version);
```

### Redirection

An export statement can import variables from a custom module and export it directly from the current script. This statement is called redirection. In this case the `export { b } from 'module2.js'` works as the `b` was imported before then exported as a local variable.

```js
import { a, b } from 'module.js'

print (a + b);
```

```js
// module.js
export var a = 2;
export { b } from 'module2.js'
```

```js
// module2.js
export var b = 40;
```

### Default imports and exports

You can have exactly one default export per module. In the following code, the `module.js` exports a variable named `a` as default export, but the main script imports it as `defaultExport`. Import statement without brackets is for default export.

Default and named exports can be combined in one statement. Note that the `import * from 'script'` does not import the default export. Use the `import defaultExport, * as star from 'script'` instead.

```js
import defaultExport, { b as c } from 'module.js'

print (defaultExport); // 2
print (c ()); // 42
```

```js
// module.js
export default var a = 2;
export function b () {
  return 42;
}
```

### Import module for it's side effect only

Import a module without importing anything. In this case the module's code is run but the exported parts are unreachable.

```js
import from 'module.js' // > module.js
b (); // (ReferenceError) b is not defined
```

```js
// module.js
export function b () {
  print ("> module.js");
  return 42;
}
b ();
```

The following use case is not allowed:

```js
import from 'module.js'
import { b } from 'module.js'
```

## Unsupported features

* **snapshot**
* whole module export statements
  * `export *`

## Feature requests

* Print errors from the imported scripts instead of printing "not found" error message.
